/*! backbone-superapi-sync - v0.5.1
 *  Release on: 2015-04-22
 *  Copyright (c) 2015 St√©phane Bachelier
 *  Licensed MIT */
!function(a,b){"function"==typeof define&&define.amd?define(["backbone"],function(c){return a["Backbone.superapiSync"]=b(c)}):"object"==typeof exports?module.exports=b(require("backbone")):a["Backbone.superapiSync"]=b(Backbone)}(this,function(){"use strict";var a={create:"post",update:"put","delete":"delete",read:"get"};return Backbone.superapiSync=function(b,c){return function(d,e,f){var g=a[d];_.defaults(f||(f={}));var h=f.url?f.url:_.result(e,"url")||urlError(),i={headers:_.defaults({},c?c.headers:{},f.headers),options:_.defaults({},c?c.options:{},f.options)},j="read"!==d?f.attrs||e.toJSON(f):{},k=b.sendRequest(g,h,j,i);return k.on("error",Backbone.superapiSync.onError),k.on("abort",Backbone.superapiSync.onAbort),k.end(function(a){var b=a.body||{};a.error?(f.error(b),Backbone.superapiSync.onError(a)):f.success(b)}),e.trigger("request",e,k.xhr,f),k.xhr}},Backbone.superapiSync.onError=function(){},Backbone.superapiSync.onAbort=function(){},Backbone.superapiSync});